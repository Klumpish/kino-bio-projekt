(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(s){if(s.ep)return;s.ep=!0;const t=i(s);fetch(s.href,t)}})();class m{constructor(){}CardGenerator(e=1){const i=document.querySelector(".movies__list");for(let l=0;l<e;l++){const s=document.createElement("li");s.classList="movies__list-item";const t=document.createElement("article");t.classList="movie-card",t.setAttribute("aria-label","${title}");const r=document.createElement("img");r.classList="movie-card__image",r.src="https://cinemalightboxes.com/cdn/shop/files/The_Grinch_1296x.jpg?v=1727185330",r.alt="Omslag för filmen ${title}",r.setAttribute("aria-hidden","false");const c=document.createElement("h3");c.classList="movie-card__title",c.textContent="The Grinch";const n=document.createElement("time");n.classList="movie-card__date",n.setAttribute("aria-label","Premiär"),n.textContent="2000-12-01";const a=document.createElement("button");a.classList="movie-card__button",a.textContent="Boka biljett",a.setAttribute("aria-label","Boka biljett");const d=document.createElement("span");d.classList="movie-card__genre",d.textContent="Animation",t.appendChild(r),t.appendChild(c),t.appendChild(n),t.appendChild(d),t.appendChild(a),s.appendChild(t),i.appendChild(s)}}}class p{constructor(e){this.backend=e,this.films=[]}async add(e,i){try{i.style.display="block",(await this.backend.loadAllFilms()).forEach(s=>{const t=this.render(s);this.films.push(t),e.appendChild(t)})}catch(l){console.error("Error(trying to load film list):",l)}finally{i.style.display="none"}}render(e){const i=document.createElement("div");return i.classList.add("allmovies"),i.innerHTML=`
            <img src="${e.image}" class="allmovies__image"  alt="${e.title}">
            <h3 class="allmovies__title">${e.title} ${e.year}</h3>
            <p class="allmovies__desc">${e.desc}</p>
            <p class="allmovies__rating">Rating: ${e.rating}</p>
            <p class="allmovies__date">Datum: ${e.date}</p>
            <p class="allmovies__price">Pris: ${e.price}SEK</p>
            <p class="allmovies__seat">Platser: ${e.seatsAvailable}</p>
        `,i}}class u{constructor(e){this.apiUrl=e}async loadAllFilms(){const e=await fetch(this.apiUrl+"/movies");if(!e.ok)throw new Error(`Failed to fetch movies: ${e.statusText}`);const i=await e.json();return console.log(i),i}}if(document.querySelector(".movies__list-all")){const o=document.createElement("div");o.classList.add("loading-message"),o.innerText=`Api is starting
Loading movies... Please wait.`,document.querySelector(".loading-message").appendChild(o),o.style.display="none";const e=new u("https://kino-bio-projekt.onrender.com");console.log("Link to API:"+e),new p(e).add(document.querySelector(".movies__list-all"),o)}else new m().CardGenerator(4);
